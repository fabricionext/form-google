{% extends "_base_peticionador_vuetify.html" %}

{% block title %}Configurações do Sistema{% endblock %}

{% block content %}
<div class="fade-in">
  <!-- Header Section -->
  <v-row class="mb-6">
    <v-col cols="12">
      <div class="d-flex justify-space-between align-center">
        <div>
          <h1 class="text-h4 font-weight-bold text-primary mb-2">
            <v-icon icon="mdi-cog" class="me-3"></v-icon>
            Configurações do Sistema
          </h1>
          <v-breadcrumbs :items="[
            { title: 'Dashboard', href: '{{ url_for('peticionador.index') }}', disabled: false },
            { title: 'Configurações', disabled: true }
          ]" class="pa-0"></v-breadcrumbs>
        </div>
        <v-chip color="success" variant="tonal" size="large">
          <v-icon icon="mdi-shield-check" size="16" class="me-1"></v-icon>
          Sistema Ativo
        </v-chip>
      </div>
    </v-col>
  </v-row>

  <!-- Configuration Sections -->
  <v-row>
    <!-- System Information -->
    <v-col cols="12" lg="6">
      <v-card elevation="2" class="mb-4">
        <v-card-title class="d-flex align-center">
          <v-icon icon="mdi-information" class="me-2"></v-icon>
          Informações do Sistema
        </v-card-title>
        <v-card-text>
          <v-list density="compact">
            <v-list-item>
              <v-list-item-title>Versão do Sistema</v-list-item-title>
              <v-list-item-subtitle>v2.0.0 - Peticionador ADV</v-list-item-subtitle>
            </v-list-item>
            <v-list-item>
              <v-list-item-title>Última Atualização</v-list-item-title>
              <v-list-item-subtitle>02/07/2025 17:10</v-list-item-subtitle>
            </v-list-item>
            <v-list-item>
              <v-list-item-title>Status do Servidor</v-list-item-title>
              <template v-slot:append>
                <v-chip color="success" size="small" variant="tonal">
                  <v-icon icon="mdi-check-circle" size="14" class="me-1"></v-icon>
                  Online
                </v-chip>
              </template>
            </v-list-item>
            <v-list-item>
              <v-list-item-title>Total de Usuários</v-list-item-title>
              <v-list-item-subtitle>{{ total_usuarios or 0 }} usuários cadastrados</v-list-item-subtitle>
            </v-list-item>
            <v-list-item>
              <v-list-item-title>Total de Clientes</v-list-item-title>
              <v-list-item-subtitle>{{ total_clientes or 0 }} clientes no sistema</v-list-item-subtitle>
            </v-list-item>
          </v-list>
        </v-card-text>
      </v-card>
    </v-col>

    <!-- Quick Settings -->
    <v-col cols="12" lg="6">
      <v-card elevation="2" class="mb-4">
        <v-card-title class="d-flex align-center">
          <v-icon icon="mdi-tune" class="me-2"></v-icon>
          Configurações Rápidas
        </v-card-title>
        <v-card-text>
          <v-list>
            <v-list-item @click="toggleNotifications">
              <template v-slot:prepend>
                <v-icon icon="mdi-bell" color="primary"></v-icon>
              </template>
              <v-list-item-title>Notificações</v-list-item-title>
              <v-list-item-subtitle>Receber alertas do sistema</v-list-item-subtitle>
              <template v-slot:append>
                <v-switch v-model="notifications" color="primary" hide-details></v-switch>
              </template>
            </v-list-item>
            
            <v-list-item @click="toggleDarkMode">
              <template v-slot:prepend>
                <v-icon icon="mdi-theme-light-dark" color="primary"></v-icon>
              </template>
              <v-list-item-title>Modo Escuro</v-list-item-title>
              <v-list-item-subtitle>Alternar tema da interface</v-list-item-subtitle>
              <template v-slot:append>
                <v-switch v-model="darkMode" color="primary" hide-details></v-switch>
              </template>
            </v-list-item>
            
            <v-list-item>
              <template v-slot:prepend>
                <v-icon icon="mdi-auto-fix" color="primary"></v-icon>
              </template>
              <v-list-item-title>Auto-salvamento</v-list-item-title>
              <v-list-item-subtitle>Salvar formulários automaticamente</v-list-item-subtitle>
              <template v-slot:append>
                <v-switch v-model="autoSave" color="primary" hide-details></v-switch>
              </template>
            </v-list-item>
          </v-list>
        </v-card-text>
      </v-card>
    </v-col>
  </v-row>

  <!-- Management Actions -->
  <v-row>
    <v-col cols="12">
      <v-card elevation="2">
        <v-card-title class="d-flex align-center">
          <v-icon icon="mdi-cogs" class="me-2"></v-icon>
          Gerenciamento do Sistema
        </v-card-title>
        <v-card-text>
          <v-row>
            <v-col cols="12" md="4">
              <v-card color="primary" variant="tonal" class="h-100" @click="goToAdmin" style="cursor: pointer">
                <v-card-text class="text-center pa-6">
                  <v-icon icon="mdi-shield-crown" color="primary" size="48" class="mb-3"></v-icon>
                  <h4 class="text-h6 font-weight-medium mb-2">Dashboard Admin</h4>
                  <p class="text-body-2 text-medium-emphasis">
                    Acesse controles avançados do sistema
                  </p>
                </v-card-text>
              </v-card>
            </v-col>
            
            <v-col cols="12" md="4">
              <v-card color="info" variant="tonal" class="h-100" @click="generateReport" style="cursor: pointer">
                <v-card-text class="text-center pa-6">
                  <v-icon icon="mdi-chart-line" color="info" size="48" class="mb-3"></v-icon>
                  <h4 class="text-h6 font-weight-medium mb-2">Relatórios</h4>
                  <p class="text-body-2 text-medium-emphasis">
                    Gerar relatórios de uso e estatísticas
                  </p>
                </v-card-text>
              </v-card>
            </v-col>
            
            <v-col cols="12" md="4">
              <v-card color="warning" variant="tonal" class="h-100" @click="exportData" style="cursor: pointer">
                <v-card-text class="text-center pa-6">
                  <v-icon icon="mdi-download" color="warning" size="48" class="mb-3"></v-icon>
                  <h4 class="text-h6 font-weight-medium mb-2">Backup</h4>
                  <p class="text-body-2 text-medium-emphasis">
                    Exportar dados do sistema
                  </p>
                </v-card-text>
              </v-card>
            </v-col>
          </v-row>
        </v-card-text>
      </v-card>
    </v-col>
  </v-row>

  <!-- Support Section -->
  <v-row class="mt-6">
    <v-col cols="12">
      <v-card color="grey-lighten-4" elevation="1">
        <v-card-text class="pa-6">
          <div class="d-flex align-center">
            <v-icon icon="mdi-help-circle" color="info" size="32" class="me-4"></v-icon>
            <div>
              <h4 class="text-h6 font-weight-medium mb-1">Precisa de Ajuda?</h4>
              <p class="text-body-2 mb-2">
                Entre em contato com o suporte técnico para assistência com o sistema.
              </p>
              <div class="d-flex gap-2">
                <v-btn color="info" size="small" variant="tonal" prepend-icon="mdi-email">
                  suporte@estevaoalmeida.com.br
                </v-btn>
                <v-btn color="info" size="small" variant="outlined" prepend-icon="mdi-phone">
                  (11) 9999-9999
                </v-btn>
              </div>
            </div>
          </div>
        </v-card-text>
      </v-card>
    </v-col>
  </v-row>
</div>
{% endblock %}

{% block scripts %}
<script>
  // Estender o Vue app para funcionalidades das configurações
  if (window.Vue && document.getElementById('app').__vue_app__) {
    const app = document.getElementById('app').__vue_app__;
    
    app._component.data = function() {
      const originalData = app._component.data ? app._component.data() : {};
      return {
        ...originalData,
        notifications: true,
        darkMode: false,
        autoSave: true
      };
    };

    app._component.methods = {
      ...app._component.methods,
      toggleNotifications() {
        this.notifications = !this.notifications;
        // Aqui você pode adicionar lógica para salvar a preferência
        console.log('Notificações:', this.notifications ? 'Ativadas' : 'Desativadas');
      },
      toggleDarkMode() {
        this.darkMode = !this.darkMode;
        // Implementar mudança de tema
        console.log('Modo escuro:', this.darkMode ? 'Ativado' : 'Desativado');
      },
      goToAdmin() {
        window.location.href = '{{ url_for("peticionador.admin_dashboard") }}';
      },
      generateReport() {
        // Implementar geração de relatórios
        alert('Funcionalidade de relatórios em desenvolvimento');
      },
      exportData() {
        // Implementar exportação de dados
        alert('Funcionalidade de backup em desenvolvimento');
      }
    };
  }
</script>
{% endblock %}